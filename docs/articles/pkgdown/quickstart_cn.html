<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>快速入门指南 • quanteda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/readable/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><!-- docsearch --><script src="../../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../../extra.css" rel="stylesheet">
<script src="../../extra.js"></script><meta property="og:title" content="快速入门指南">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-144616-24"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-144616-24');
</script>
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">quanteda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">2.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Quick Start
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/quickstart.html">Quick Start Guide</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_es.html">Guía de Inicio Rápido</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_cn.html">快速入门指南</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/quickstart_ja.html">クイック・スタートガイド</a>
    </li>
  </ul>
</li>
<li>
  <a href="../../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Features
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/comparison.html">Feature comparison</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/design.html">Package design</a>
    </li>
    <li>
      <a href="../../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Examples
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/examples/phrase.html">Multi-word expressions</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/plotting.html">Textual data visualization</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/lsa.html">Latent Semantic Analysis (LSA)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/chinese.html">Chinese text analysis</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/examples/twitter.html">Social media analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Replications
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/pkgdown/replication/digital-humanities.html">Text Analysis with R for Students of Literature</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/text2vec.html">Word embedding (word2vec)</a>
    </li>
    <li>
      <a href="../../articles/pkgdown/replication/qss.html">Quantitative Social Science Ch. 5.1</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/quanteda/quanteda">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>快速入门指南</h1>
            
      
      
      <div class="hidden name"><code>quickstart_cn.Rmd</code></div>

    </div>

    
    
<div id="installing-the-package" class="section level1">
<h1 class="hasAnchor">
<a href="#installing-the-package" class="anchor"></a>软件包安装</h1>
<p><strong>quanteda</strong>已上传在<a href="https://CRAN.R-project.org/package=quanteda">CRAN</a>上，所以可以使用GUI的R软件包安装程序进行安装，或执行：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"quanteda"</span>)</a></code></pre></div>
<p>请参阅https://github.com/quanteda/quanteda上的说明来安装GitHub版本。</p>
<div id="additional-recommended-packages" class="section level2">
<h2 class="hasAnchor">
<a href="#additional-recommended-packages" class="anchor"></a>推荐安装</h2>
<p>我们建议安装以下软件包，以便更好地支持和扩展<strong>quanteda</strong>的功能：</p>
<ul>
<li>
<a href="https://github.com/quanteda/readtext"><strong>readtext</strong></a>: 可将几乎任何格式的文本文件读入R</li>
<li>
<a href="https://github.com/quanteda/spacyr"><strong>spacyr</strong></a>: 使用<a href="http://spacy.io">spaCy</a>库的NLP，包括词性标注，命名实体和依存语法</li>
<li>
<a href="https://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>: 用于<strong>quanteda</strong>的附加文本数据</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"quanteda/quanteda.corpora"</span>)</a></code></pre></div>
<ul>
<li>
<a href="https://github.com/kbenoit/quanteda.dictionaries"><strong>quanteda.dictionaries</strong></a>: R版<a href="http://liwc.wpengine.com">Linguistic Inquiry and Word Count</a> 文本分析软件</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" title="1">devtools<span class="op">::</span><span class="kw"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"kbenoit/quanteda.dictionaries"</span>)</a></code></pre></div>
</div>
</div>
<div id="creating-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#creating-a-corpus" class="anchor"></a>创建语料库</h1>
<p>加载<strong>quanteda</strong>以便使用软件包中的数据和功能。</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(quanteda)</a></code></pre></div>
<div id="currently-available-corpus-sources" class="section level2">
<h2 class="hasAnchor">
<a href="#currently-available-corpus-sources" class="anchor"></a>目前可用的语料库资源</h2>
<p><strong>quanteda</strong>有一个简单而强大的配套软件包用于加载文本文件: <a href="https://github.com/kbenoit/readtext"><strong>readtext</strong></a>。 这个软件包的主函数<code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code>从磁盘或者URL中读取文件或者文件集，并且返回一个可以直接和<code><a href="../../reference/corpus.html">corpus()</a></code>构造函数一起使用的data.frame，可用来创建一个<strong>quanteda</strong>语料库。</p>
<p><code><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext()</a></code>可读取：</p>
<ul>
<li>文本文件 (<code>.txt</code>)</li>
<li>逗号分割的（<code>.csv</code>）文本文件</li>
<li>XML数据</li>
<li>取自脸书API的JSON格式的数据</li>
<li>取自TwitterAPI的JSON格式的数据</li>
<li>常用的JSON数据</li>
</ul>
<p>语料库创建函数<code><a href="../../reference/corpus.html">corpus()</a></code>可用于：</p>
<ul>
<li>字符类向量，比如你使用其他工具已经加载到R工作空间的</li>
<li>
<strong>tm</strong> 软件包中<code>VCorpus</code>语料库对象</li>
<li>data.frame 包含文本列和其他任何文件级元数据</li>
</ul>
<div id="building-a-corpus-from-a-character-vector" class="section level3">
<h3 class="hasAnchor">
<a href="#building-a-corpus-from-a-character-vector" class="anchor"></a>从字符向量构建语料库</h3>
<p>最简单的方式是从R中已经存在的文本向量创建一个语料库。这使得高级R用户可以灵活地选择文本输入，因为R有很多可以读取文本向量的方法。</p>
<p>一旦我们有了这种格式的文本数据，我们就可以直接调用语料库构造函数。以从内置的英国政党2010年选举宣言（<code>data_char_ukimmig2010</code>）中提取的有关移民政策的文本为例：</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" title="1">corp_uk &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_char_ukimmig2010)  <span class="co"># 从文本构建语料库</span></a>
<a class="sourceLine" id="cb5-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_uk)</a></code></pre></div>
<pre><code>## Corpus consisting of 9 documents, showing 9 documents:
## 
##          Text Types Tokens Sentences
##           BNP  1125   3280        88
##     Coalition   142    260         4
##  Conservative   251    499        15
##        Greens   322    677        21
##        Labour   298    680        29
##        LibDem   251    483        14
##            PC    77    114         5
##           SNP    88    134         4
##          UKIP   346    722        27</code></pre>
<p>我们也可以添加一些文档变量– <strong>quanteda</strong> 称之为此语料库的<code><a href="../../reference/docvars.html">docvars()</a></code>。</p>
<p>我们可以使用R的<code><a href="https://rdrr.io/r/base/names.html">names()</a></code>函数来读取字符向量<code>data_char_ukimmig2010</code>的名称，并且将其给文档变量赋值。</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" title="1"><span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(corp_uk, <span class="st">"Party"</span>) &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/names.html">names</a></span>(data_char_ukimmig2010)</a>
<a class="sourceLine" id="cb7-2" title="2"><span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(corp_uk, <span class="st">"Year"</span>) &lt;-<span class="st"> </span><span class="dv">2010</span></a>
<a class="sourceLine" id="cb7-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_uk)</a></code></pre></div>
<pre><code>## Corpus consisting of 9 documents, showing 9 documents:
## 
##          Text Types Tokens Sentences        Party Year
##           BNP  1125   3280        88          BNP 2010
##     Coalition   142    260         4    Coalition 2010
##  Conservative   251    499        15 Conservative 2010
##        Greens   322    677        21       Greens 2010
##        Labour   298    680        29       Labour 2010
##        LibDem   251    483        14       LibDem 2010
##            PC    77    114         5           PC 2010
##           SNP    88    134         4          SNP 2010
##          UKIP   346    722        27         UKIP 2010</code></pre>
</div>
<div id="loading-in-files-using-the-readtext-package" class="section level3">
<h3 class="hasAnchor">
<a href="#loading-in-files-using-the-readtext-package" class="anchor"></a>readtext软件包加载文件</h3>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(readtext)</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3"><span class="co"># Twitter json</span></a>
<a class="sourceLine" id="cb9-4" title="4">dat_json &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/social media/zombies/tweets.json"</span>)</a>
<a class="sourceLine" id="cb9-5" title="5">corp_twitter &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_json)</a>
<a class="sourceLine" id="cb9-6" title="6"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp_twitter, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-7" title="7"><span class="co"># 通用json - 需要“textfield”说明符</span></a>
<a class="sourceLine" id="cb9-8" title="8">dat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/Manuscripts/collocations/Corpora/sotu/sotu.json"</span>,</a>
<a class="sourceLine" id="cb9-9" title="9">                     <span class="dt">textfield =</span> <span class="st">"text"</span>)</a>
<a class="sourceLine" id="cb9-10" title="10"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_sotu), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-11" title="11"><span class="co"># 文本文件</span></a>
<a class="sourceLine" id="cb9-12" title="12">dat_txtone &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/project_gutenberg/pg2701.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-13" title="13"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtone), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-14" title="14"><span class="co"># 多文本文件</span></a>
<a class="sourceLine" id="cb9-15" title="15">dat_txtmultiple1 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>, <span class="dt">cache =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-16" title="16"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtmultiple1), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-17" title="17"><span class="co"># 包含取自文件名的docvars的多个文本文件</span></a>
<a class="sourceLine" id="cb9-18" title="18">dat_txtmultiple2 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/corpora/inaugural/*.txt"</span>,</a>
<a class="sourceLine" id="cb9-19" title="19">                             <span class="dt">docvarsfrom =</span> <span class="st">"filenames"</span>, <span class="dt">sep =</span> <span class="st">"-"</span>, <span class="dt">docvarnames =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Year"</span>, <span class="st">"President"</span>))</a>
<a class="sourceLine" id="cb9-20" title="20"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_txtmultiple2), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-21" title="21"><span class="co"># XML 数据</span></a>
<a class="sourceLine" id="cb9-22" title="22">dat_xml &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"~/Dropbox/QUANTESS/quanteda_working_files/xmlData/plant_catalog.xml"</span>,</a>
<a class="sourceLine" id="cb9-23" title="23">                    <span class="dt">dat_xml =</span> <span class="st">"COMMON"</span>)</a>
<a class="sourceLine" id="cb9-24" title="24"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_xml), <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb9-25" title="25"><span class="co"># csv 文件</span></a>
<a class="sourceLine" id="cb9-26" title="26"><span class="kw"><a href="https://rdrr.io/r/utils/write.table.html">write.csv</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="dt">inaug_speech =</span> <span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural),</a>
<a class="sourceLine" id="cb9-27" title="27">                     <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural)),</a>
<a class="sourceLine" id="cb9-28" title="28">          <span class="dt">file =</span> <span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">row.names =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb9-29" title="29">dat_csv &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/readtext/man/readtext.html">readtext</a></span>(<span class="st">"/tmp/inaug_texts.csv"</span>, <span class="dt">textfield =</span> <span class="st">"inaug_speech"</span>)</a>
<a class="sourceLine" id="cb9-30" title="30"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(dat_csv), <span class="dv">5</span>)</a></code></pre></div>
</div>
</div>
<div id="how-a-quanteda-corpus-works" class="section level2">
<h2 class="hasAnchor">
<a href="#how-a-quanteda-corpus-works" class="anchor"></a>quanteda语料库工作方式</h2>
<div id="corpus-principles" class="section level3">
<h3 class="hasAnchor">
<a href="#corpus-principles" class="anchor"></a>语料库的原则</h3>
<p>语料库被设计成原始文档的“库”，该文档被转换为UTF-8编码的纯文本文件，并与元数据一起分别存储于语料库级和文档级。我们给文档级元数据一个特殊的名字：<code><a href="../../reference/docvars.html">docvars()</a></code>。这些变量或特征描述了每个文档的属性。</p>
<p>从处理和分析的角度，语料库被设计成相对静态的文本容器。这意味着语料库中的文本不能从内部通过（例如）清理或预处理改变，比如词干提取或去除标点符号。相反，作为处理过程的一部分文本可以从语料库中提取，并赋值给新的对象，但是设计的思路是将语料库作为原始参考副本保留下来，以便于其他分析 - 例如那些需要词干和标点符号的分析-比如分析阅读难易指数 - 可以在相同的语料库上执行。</p>
<p>为了从语料库中提取文本，我们使用一个名为<code><a href="../../reference/texts.html">texts()</a></code>的提取器。</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" title="1"><span class="kw"><a href="../../reference/texts.html">texts</a></span>(data_corpus_inaugural)[<span class="dv">2</span>]</a></code></pre></div>
<pre><code>##                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              1793-Washington 
## "Fellow citizens, I am again called upon by the voice of my country to execute the functions of its Chief Magistrate. When the occasion proper for it shall arrive, I shall endeavor to express the high sense I entertain of this distinguished honor, and of the confidence which has been reposed in me by the people of united America.\n\nPrevious to the execution of any official act of the President the Constitution requires an oath of office. This oath I am now about to take, and in your presence: That if it shall be found during my administration of the Government I have in any instance violated willingly or knowingly the injunctions thereof, I may (besides incurring constitutional punishment) be subject to the upbraidings of all who are now witnesses of the present solemn ceremony.\n\n "</code></pre>
<p>为了总结语料库中的文本，我们可以调用一个为语料库定义的函数<code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>。</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(data_corpus_irishbudget2010)</a></code></pre></div>
<pre><code>## Corpus consisting of 14 documents, showing 14 documents:
## 
##                       Text Types Tokens Sentences year debate number      foren
##        Lenihan, Brian (FF)  1953   8641       374 2010 BUDGET     01      Brian
##       Bruton, Richard (FG)  1040   4446       217 2010 BUDGET     02    Richard
##         Burton, Joan (LAB)  1624   6393       307 2010 BUDGET     03       Joan
##        Morgan, Arthur (SF)  1595   7107       343 2010 BUDGET     04     Arthur
##          Cowen, Brian (FF)  1629   6599       250 2010 BUDGET     05      Brian
##           Kenny, Enda (FG)  1148   4232       153 2010 BUDGET     06       Enda
##      ODonnell, Kieran (FG)   678   2297       133 2010 BUDGET     07     Kieran
##       Gilmore, Eamon (LAB)  1181   4176       201 2010 BUDGET     08      Eamon
##     Higgins, Michael (LAB)   488   1286        44 2010 BUDGET     09    Michael
##        Quinn, Ruairi (LAB)   439   1284        59 2010 BUDGET     10     Ruairi
##      Gormley, John (Green)   401   1030        49 2010 BUDGET     11       John
##        Ryan, Eamon (Green)   510   1643        90 2010 BUDGET     12      Eamon
##      Cuffe, Ciaran (Green)   442   1240        45 2010 BUDGET     13     Ciaran
##  OCaolain, Caoimhghin (SF)  1188   4043       176 2010 BUDGET     14 Caoimhghin
##      name party
##   Lenihan    FF
##    Bruton    FG
##    Burton   LAB
##    Morgan    SF
##     Cowen    FF
##     Kenny    FG
##  ODonnell    FG
##   Gilmore   LAB
##   Higgins   LAB
##     Quinn   LAB
##   Gormley Green
##      Ryan Green
##     Cuffe Green
##  OCaolain    SF</code></pre>
<p>我们可以将汇总命令的输出保存为data.frame，并用这些信息绘制出一些基本的描述性统计信息：</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" title="1">tokeninfo &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(data_corpus_inaugural)</a>
<a class="sourceLine" id="cb14-2" title="2"><span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(ggplot2))</a>
<a class="sourceLine" id="cb14-3" title="3">    <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span>(<span class="dt">data =</span> tokeninfo, <span class="kw"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span>(<span class="dt">x =</span> Year, <span class="dt">y =</span> Tokens, <span class="dt">group =</span> <span class="dv">1</span>)) <span class="op">+</span></a>
<a class="sourceLine" id="cb14-4" title="4"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb14-5" title="5"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span>() <span class="op">+</span></a>
<a class="sourceLine" id="cb14-6" title="6"><span class="st">    </span><span class="kw"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_continuous</a></span>(<span class="dt">labels =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>)), <span class="dt">breaks =</span> <span class="kw"><a href="https://rdrr.io/r/base/seq.html">seq</a></span>(<span class="dv">1789</span>, <span class="dv">2017</span>, <span class="dv">12</span>))</a></code></pre></div>
<pre><code>## Loading required package: ggplot2</code></pre>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-11-1.png" width="768"></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" title="1"><span class="co"># 最长的就职演说: William Henry Harrison</span></a>
<a class="sourceLine" id="cb16-2" title="2">tokeninfo[<span class="kw"><a href="https://rdrr.io/r/base/which.min.html">which.max</a></span>(tokeninfo<span class="op">$</span>Tokens), ]</a></code></pre></div>
<pre><code>##             Text Types Tokens Sentences Year President     FirstName Party
## 14 1841-Harrison  1912   9086       210 1841  Harrison William Henry  Whig</code></pre>
</div>
</div>
<div id="tools-for-handling-corpus-objects" class="section level2">
<h2 class="hasAnchor">
<a href="#tools-for-handling-corpus-objects" class="anchor"></a>处理语料库对象的功能</h2>
<div id="adding-two-corpus-objects-together" class="section level3">
<h3 class="hasAnchor">
<a href="#adding-two-corpus-objects-together" class="anchor"></a>合并两个语料库对象</h3>
<p><code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code>运算符提供了一个连接两个语料库对象的简单方法。如果它们包含了不同的文档级别的变量，这些也将被合并起来以保证不丢失任何信息。语料库级别的元数据也被连接在一起。</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(quanteda)</a>
<a class="sourceLine" id="cb18-2" title="2">corp1 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>])</a>
<a class="sourceLine" id="cb18-3" title="3">corp2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus.html">corpus</a></span>(data_corpus_inaugural[<span class="dv">53</span><span class="op">:</span><span class="dv">58</span>])</a>
<a class="sourceLine" id="cb18-4" title="4">corp3 &lt;-<span class="st"> </span>corp1 <span class="op">+</span><span class="st"> </span>corp2</a>
<a class="sourceLine" id="cb18-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(corp3)</a></code></pre></div>
<pre><code>## Corpus consisting of 11 documents, showing 11 documents:
## 
##             Text Types Tokens Sentences Year  President FirstName
##  1789-Washington   625   1537        23 1789 Washington    George
##  1793-Washington    96    147         4 1793 Washington    George
##       1797-Adams   826   2577        37 1797      Adams      John
##   1801-Jefferson   717   1923        41 1801  Jefferson    Thomas
##   1805-Jefferson   804   2380        45 1805  Jefferson    Thomas
##     1997-Clinton   773   2436       111 1997    Clinton      Bill
##        2001-Bush   621   1802        97 2001       Bush George W.
##        2005-Bush   772   2312        99 2005       Bush George W.
##       2009-Obama   938   2689       110 2009      Obama    Barack
##       2013-Obama   814   2317        88 2013      Obama    Barack
##       2017-Trump   582   1660        88 2017      Trump Donald J.
##                  Party
##                   none
##                   none
##             Federalist
##  Democratic-Republican
##  Democratic-Republican
##             Democratic
##             Republican
##             Republican
##             Democratic
##             Democratic
##             Republican</code></pre>
</div>
<div id="subsetting-corpus-objects" class="section level3">
<h3 class="hasAnchor">
<a href="#subsetting-corpus-objects" class="anchor"></a>提取语料库的子集</h3>
<p><code><a href="../../reference/corpus_subset.html">corpus_subset()</a></code>是为语料库定义的一个函数，用于根据基于<code><a href="../../reference/docvars.html">docvars()</a></code>的逻辑条件提取语料库子集：</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>))</a></code></pre></div>
<pre><code>## Corpus consisting of 7 documents, showing 7 documents:
## 
##          Text Types Tokens Sentences Year President FirstName      Party
##  1993-Clinton   642   1833        81 1993   Clinton      Bill Democratic
##  1997-Clinton   773   2436       111 1997   Clinton      Bill Democratic
##     2001-Bush   621   1802        97 2001      Bush George W. Republican
##     2005-Bush   772   2312        99 2005      Bush George W. Republican
##    2009-Obama   938   2689       110 2009     Obama    Barack Democratic
##    2013-Obama   814   2317        88 2013     Obama    Barack Democratic
##    2017-Trump   582   1660        88 2017     Trump Donald J. Republican</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb22-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, President <span class="op">==</span><span class="st"> "Adams"</span>))</a></code></pre></div>
<pre><code>## Corpus consisting of 2 documents, showing 2 documents:
## 
##        Text Types Tokens Sentences Year President   FirstName
##  1797-Adams   826   2577        37 1797     Adams        John
##  1825-Adams  1003   3147        74 1825     Adams John Quincy
##                  Party
##             Federalist
##  Democratic-Republican</code></pre>
</div>
</div>
<div id="exploring-corpus-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#exploring-corpus-texts" class="anchor"></a>浏览语料库文本</h2>
<p><code>kwic</code>功能（keywords-in-context）可以搜索一个指定的词并显示它的上下文：</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"terror"</span>)</a></code></pre></div>
<pre><code>##                                                                     
##     [1797-Adams, 1324]              fraud or violence, by | terror |
##  [1933-Roosevelt, 111] nameless, unreasoning, unjustified | terror |
##  [1941-Roosevelt, 285]      seemed frozen by a fatalistic | terror |
##    [1961-Kennedy, 848]    alter that uncertain balance of | terror |
##     [1981-Reagan, 811]     freeing all Americans from the | terror |
##   [1997-Clinton, 1047]        They fuel the fanaticism of | terror |
##   [1997-Clinton, 1647]  maintain a strong defense against | terror |
##     [2009-Obama, 1619]     advance their aims by inducing | terror |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  of runaway living costs.         
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"terror"</span>, <span class="dt">valuetype =</span> <span class="st">"regex"</span>)</a></code></pre></div>
<pre><code>##                                                                             
##     [1797-Adams, 1324]                   fraud or violence, by |  terror   |
##  [1933-Roosevelt, 111]      nameless, unreasoning, unjustified |  terror   |
##  [1941-Roosevelt, 285]           seemed frozen by a fatalistic |  terror   |
##    [1961-Kennedy, 848]         alter that uncertain balance of |  terror   |
##    [1961-Kennedy, 970]               of science instead of its |  terrors  |
##     [1981-Reagan, 811]          freeing all Americans from the |  terror   |
##    [1981-Reagan, 2186]        understood by those who practice | terrorism |
##   [1997-Clinton, 1047]             They fuel the fanaticism of |  terror   |
##   [1997-Clinton, 1647]       maintain a strong defense against |  terror   |
##     [2009-Obama, 1619]          advance their aims by inducing |  terror   |
##     [2017-Trump, 1117] civilized world against radical Islamic | terrorism |
##                                   
##  , intrigue, or venality          
##  which paralyzes needed efforts to
##  , we proved that this            
##  that stays the hand of           
##  . Together let us explore        
##  of runaway living costs.         
##  and prey upon their neighbors    
##  . And they torment the           
##  and destruction. Our children    
##  and slaughtering innocents, we   
##  , which we will eradicate</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1"><span class="kw"><a href="../../reference/kwic.html">kwic</a></span>(data_corpus_inaugural, <span class="dt">pattern =</span> <span class="st">"communist*"</span>)</a></code></pre></div>
<pre><code>##                                                                   
##   [1949-Truman, 830] the actions resulting from the | Communist  |
##  [1961-Kennedy, 510]     required-- not because the | Communists |
##                            
##  philosophy are a threat to
##  may be doing it,</code></pre>
<p>在上面的汇总中，<code>Year</code>和<code>President</code>是与每个文档相关的变量。我们可以用<code><a href="../../reference/docvars.html">docvars()</a></code>函数访问这些变量。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1"><span class="co"># 浏览文档变量</span></a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(data_corpus_inaugural))</a></code></pre></div>
<pre><code>##   Year  President FirstName                 Party
## 1 1789 Washington    George                  none
## 2 1793 Washington    George                  none
## 3 1797      Adams      John            Federalist
## 4 1801  Jefferson    Thomas Democratic-Republican
## 5 1805  Jefferson    Thomas Democratic-Republican
## 6 1809    Madison     James Democratic-Republican</code></pre>
<p><a href="http://github.com/quanteda/quanteda.corpora"><strong>quanteda.corpora</strong></a>软件包提供更多语料库资源。</p>
</div>
</div>
<div id="extracting-features-from-a-corpus" class="section level1">
<h1 class="hasAnchor">
<a href="#extracting-features-from-a-corpus" class="anchor"></a>从语料库中提取特征</h1>
<p>为了执行文档缩放等统计分析，我们必须提取一个将某些特征与文档关联起来矩阵。在quanteda中，dfm函数用来生成这样一个矩阵。“dfm”是文档特征矩阵的缩写，矩阵的行总是为文档而列为“特征”。我们这样定义矩阵的行与列是因为在数据分析中标准的做法是将一个分析单元作为行，而将与每个单元有关的特征或变量作为列。我们称之为“特征”而不是“词项”，因为特征比词项更通用：词项可以被定义为原始词项，词干词项，词性词项，停用词去除后的词项，或者词项归属的字典。而特征可以是完全通用的，例如ngram或者句法依存，我们对矩阵的定义持开放式态度。</p>
<div id="tokenizing-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#tokenizing-texts" class="anchor"></a>文本分词</h2>
<p>为了简单地对文本分词，quanteda提供了一个强大的命令<code><a href="../../reference/tokens.html">tokens()</a></code>。这个命令会产生了一个以字符向量形式存在的分词表，表中的每单元元素 都对应于一个输入文档。</p>
<p><code><a href="../../reference/tokens.html">tokens()</a></code>有意设计成保守的，意味着除非有指令，它不会从文本中删除任何东西。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1">txt &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dt">text1 =</span> <span class="st">"This is $10 in 999 different ways,</span><span class="ch">\n</span><span class="st"> up and down; left and right!"</span>,</a>
<a class="sourceLine" id="cb32-2" title="2">         <span class="dt">text2 =</span> <span class="st">"@kenbenoit working: on #quanteda 2day</span><span class="ch">\t</span><span class="st">4ever, http://textasdata.com?page=123."</span>)</a>
<a class="sourceLine" id="cb32-3" title="3"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [ ... and 5 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different" "ways"     
##  [7] "up"        "and"       "down"      "left"      "and"       "right"    
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] "on"                              "#quanteda"                      
## [5] "2day"                            "4ever"                          
## [7] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      "up"        "and"       "down"      "left"     
## [ ... and 2 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] "on"                              "#quanteda"                      
## [5] "2day"                            "4ever"                          
## [7] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,  <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "in"        "different" "ways"     
##  [7] ","         "up"        "and"       "down"      ";"         "left"     
## [ ... and 3 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      "is"        "$"         "10"        "in"        "999"      
##  [7] "different" "ways"      ","         "up"        "and"       "down"     
## [ ... and 5 more ]
## 
## text2 :
## [1] "@kenbenoit"                      "working"                        
## [3] ":"                               "on"                             
## [5] "#quanteda"                       "2day"                           
## [7] "4ever"                           ","                              
## [9] "http://textasdata.com?page=123."</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb42-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(txt, <span class="dt">remove_numbers =</span> <span class="ot">FALSE</span>, <span class="dt">remove_punct =</span> <span class="ot">FALSE</span>, <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 2 documents.
## text1 :
##  [1] "This"      " "         "is"        " "         "$"         "10"       
##  [7] " "         "in"        " "         "999"       " "         "different"
## [ ... and 18 more ]
## 
## text2 :
##  [1] "@kenbenoit" " "          "working"    ":"          " "         
##  [6] "on"         " "          "#quanteda"  " "          "2day"      
## [11] "\t"         "4ever"     
## [ ... and 3 more ]</code></pre>
<p>也可以按字符分词：</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb44-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" "w" "e" "b" "s" "i" "t" "e"
## [ ... and 32 more ]</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb46-1" title="1"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"Great website: http://textasdata.com?page=123."</span>, <span class="dt">what =</span> <span class="st">"character"</span>,</a>
<a class="sourceLine" id="cb46-2" title="2">         <span class="dt">remove_separators =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
##  [1] "G" "r" "e" "a" "t" " " "w" "e" "b" "s" "i" "t"
## [ ... and 34 more ]</code></pre>
<p>以及按句子分词：</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb48-1" title="1"><span class="co"># sentence level         </span></a>
<a class="sourceLine" id="cb48-2" title="2"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"Kurt Vongeut said; only assholes use semi-colons."</span>,</a>
<a class="sourceLine" id="cb48-3" title="3">         <span class="st">"Today is Thursday in Canberra:  It is yesterday in London."</span>,</a>
<a class="sourceLine" id="cb48-4" title="4">         <span class="st">"En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</span>),</a>
<a class="sourceLine" id="cb48-5" title="5">       <span class="dt">what =</span> <span class="st">"sentence"</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 3 documents.
## text1 :
## [1] "Kurt Vongeut said; only assholes use semi-colons."
## 
## text2 :
## [1] "Today is Thursday in Canberra:  It is yesterday in London."
## 
## text3 :
## [1] "En el caso de que no puedas ir con ellos, ¿quieres ir con nosotros?"</code></pre>
</div>
<div id="constructing-a-document-feature-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#constructing-a-document-feature-matrix" class="anchor"></a>构建文档特征矩阵</h2>
<p>分词只是一个中间结果，而大多数用户都希望直接构建一个文档特征矩阵。为此，我们提供一个瑞士军刀功能<code><a href="../../reference/dfm.html">dfm()</a></code>，此项功能执行分词并将所提取的特征归纳成文档特征矩阵。不同于<code><a href="../../reference/tokens.html">tokens()</a></code>所采用的保守方法，<code><a href="../../reference/dfm.html">dfm()</a></code>函数默认某些应用选项，比如<code>toLower()</code> - 一个单独的用于转换为小写的函数，以及 - 删除标点符号。不过<code><a href="../../reference/tokens.html">tokens()</a></code>的所有选项都可以传递给<code><a href="../../reference/dfm.html">dfm()</a></code>。</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb50-1" title="1">corp_inaug_post1990 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1990</span>)</a>
<a class="sourceLine" id="cb50-2" title="2"></a>
<a class="sourceLine" id="cb50-3" title="3"><span class="co"># 构建dfm</span></a>
<a class="sourceLine" id="cb50-4" title="4">dfmat_inaug_post1990 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(corp_inaug_post1990)</a>
<a class="sourceLine" id="cb50-5" title="5">dfmat_inaug_post1990[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (0.0% sparse) and 4 docvars.
##               features
## docs           my fellow citizens   , today
##   1993-Clinton  7      5        2 139    10
##   1997-Clinton  6      7        7 131     5
##   2001-Bush     3      1        9 110     2
##   2005-Bush     2      3        6 120     3
##   2009-Obama    2      1        1 130     6
##   2013-Obama    3      3        6  99     4
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p><code><a href="../../reference/dfm.html">dfm()</a></code>的其他选项还包括去除停用词和分词的词干提取。</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb52-1" title="1"><span class="co"># 构建dfm, 去除停用词以及提取词干</span></a>
<a class="sourceLine" id="cb52-2" title="2"></a>
<a class="sourceLine" id="cb52-3" title="3">dfmat_inaug_post1990_stem &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(corp_inaug_post1990,</a>
<a class="sourceLine" id="cb52-4" title="4">                                 <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>),</a>
<a class="sourceLine" id="cb52-5" title="5">                                 <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb52-6" title="6">dfmat_inaug_post1990_stem[, <span class="dv">1</span><span class="op">:</span><span class="dv">5</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 5 features (17.1% sparse) and 4 docvars.
##               features
## docs           fellow citizen today celebr mysteri
##   1993-Clinton      5       2    10      4       1
##   1997-Clinton      7       8     6      1       0
##   2001-Bush         1      10     2      0       0
##   2005-Bush         3       7     3      2       0
##   2009-Obama        1       1     6      2       0
##   2013-Obama        3       8     6      1       0
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p><code>remove</code>选项提供一个需要被去除的分词的列表。大多数用户会提供一个为多语种预定义的“停用词”的列表，可通过<code><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords()</a></code>函数获取：</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb54-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"en"</span>), <span class="dv">20</span>)</a></code></pre></div>
<pre><code>##  [1] "i"          "me"         "my"         "myself"     "we"        
##  [6] "our"        "ours"       "ourselves"  "you"        "your"      
## [11] "yours"      "yourself"   "yourselves" "he"         "him"       
## [16] "his"        "himself"    "she"        "her"        "hers"</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb56-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ru"</span>), <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1] "и"   "в"   "во"  "не"  "что" "он"  "на"  "я"   "с"   "со"</code></pre>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb58-1" title="1"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"ar"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>), <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##  [1] "فى"  "في"  "كل"  "لم"  "لن"  "له"  "من"  "هو"  "هي"  "قوة"</code></pre>
<div id="viewing-the-document-feature-matrix" class="section level3">
<h3 class="hasAnchor">
<a href="#viewing-the-document-feature-matrix" class="anchor"></a>查看文档特征矩阵</h3>
<p>可以在RStudio 的Enviroment pane中查看dfm,或者调用R的View功能。调用<code>plot</code>dfm将调用<a href="https://cran.r-project.org/web/packages/wordcloud/index.html">wordcloud软件包</a>绘制词云图。</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb60-1" title="1">dfmat_uk &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_char_ukimmig2010, <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb60-2" title="2">dfmat_uk</a></code></pre></div>
<pre><code>## Document-feature matrix of: 9 documents, 1,551 features (83.8% sparse).
##               features
## docs           immigration unparalleled crisis bnp can solve current birth
##   BNP                   21            1      2  13   1     2       4     4
##   Coalition              6            0      0   0   0     0       1     0
##   Conservative           3            0      0   0   2     0       0     0
##   Greens                 8            0      0   0   1     0       0     0
##   Labour                13            0      0   0   1     0       0     0
##   LibDem                 5            0      0   0   2     0       0     0
##               features
## docs           rates indigenous
##   BNP              2          5
##   Coalition        0          0
##   Conservative     0          0
##   Greens           0          0
##   Labour           0          0
##   LibDem           0          0
## [ reached max_ndoc ... 3 more documents, reached max_nfeat ... 1,541 more features ]</code></pre>
<p>使用<code><a href="../../reference/topfeatures.html">topfeatures()</a></code>可以访问出现频率最高的特征：</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb62-1" title="1"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(dfmat_uk, <span class="dv">20</span>)  <span class="co"># 20 词频最高的词</span></a></code></pre></div>
<pre><code>## immigration     british      people      asylum     britain          uk 
##          66          37          35          29          28          27 
##      system  population     country         new  immigrants      ensure 
##          27          21          20          19          17          17 
##       shall citizenship      social    national         bnp     illegal 
##          17          16          14          14          13          13 
##        work     percent 
##          13          12</code></pre>
<p>使用<code><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud()</a></code>可以绘制<code>dfm</code>对象的词云图。这个函数将参数传递给<strong>wordcloud</strong>包的<code><a href="../../reference/wordcloud.html">wordcloud()</a></code>函数，并且可以使用相同的参数来对图进行美化：</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb64-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb64-2" title="2"><span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(dfmat_uk, <span class="dt">min.freq =</span> <span class="dv">6</span>, <span class="dt">random.order =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb64-3" title="3">                   <span class="dt">rotation =</span> <span class="fl">.25</span>,</a>
<a class="sourceLine" id="cb64-4" title="4">                   <span class="dt">colors =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</a></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-26-1.png" width="672"></p>
</div>
<div id="grouping-documents-by-document-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-documents-by-document-variable" class="anchor"></a>按文档变量对文档分组</h3>
<p>通常，我们感兴趣的是根据可能存在于文档变量中实质性因素来分析文本是如何不同的，而不仅仅是根据文档文件的边界。创建dfm时，我们可以将具有相同文档变量的文档分成一组：</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb65-1" title="1">dfmat_ire &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010, <span class="dt">groups =</span> <span class="st">"party"</span>,</a>
<a class="sourceLine" id="cb65-2" title="2">                 <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>我们可以对这个dfm进行排序，并查看：</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb66-1" title="1"><span class="kw"><a href="../../reference/dfm_sort.html">dfm_sort</a></span>(dfmat_ire)[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
<pre><code>## Document-feature matrix of: 5 documents, 10 features (0.0% sparse) and 3 docvars.
##        features
## docs      € people budget government public minister tax economy pay jobs
##   FF    113     23     44         47     65       11  60      37  41   41
##   FG     55     78     71         61     47       62  11      20  29   17
##   Green  13     15     26         19      4        4  11      16   4   15
##   LAB    78     69     66         36     32       54  47      37  24   20
##   SF     77     81     53         73     31       39  34      50  24   27</code></pre>
<p>请注意，最常出现的特征是“will”，这个词通常出现在英语停用词表中，但是并不包含在quanteda的内置英语停用词表中。</p>
</div>
<div id="grouping-words-by-dictionary-or-equivalence-class" class="section level3">
<h3 class="hasAnchor">
<a href="#grouping-words-by-dictionary-or-equivalence-class" class="anchor"></a>按字典或等价的类别对词汇分组</h3>
<p>在某些应用中，关于文本中我们感兴趣的单词集合我们有先验知识。例如，在电影评论中，通用的正面词汇的列表可能表示对电影正面的评价，或者我们可能会有一个与特定的意识形态立场相关的政治词汇的字典。在这些情况下，为了分析的目的，将这些词组等同处理并将其计数归类是有用的。</p>
<p>例如，我们来看看总统在就职演讲的语料库中，与恐怖主义有关的词汇和与经济相关的词语在总统之间是如何变化的。从原语料库中，我们选择自克林顿以来的总统：</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb68-1" title="1">corp_inaug_post1991 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1991</span>)</a></code></pre></div>
<p>现在我们定义一个用于展示的字典：</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb69-1" title="1">dict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">list</a></span>(<span class="dt">terror =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"terrorism"</span>, <span class="st">"terrorists"</span>, <span class="st">"threat"</span>),</a>
<a class="sourceLine" id="cb69-2" title="2">                        <span class="dt">economy =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"jobs"</span>, <span class="st">"business"</span>, <span class="st">"grow"</span>, <span class="st">"work"</span>)))</a></code></pre></div>
<p>我们也可在构建dfm时使用字典：</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb70-1" title="1">dfmat_inaug_post1991_dict &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(corp_inaug_post1991, <span class="dt">dictionary =</span> dict)</a>
<a class="sourceLine" id="cb70-2" title="2">dfmat_inaug_post1991_dict</a></code></pre></div>
<pre><code>## Document-feature matrix of: 7 documents, 2 features (14.3% sparse) and 4 docvars.
##               features
## docs           terror economy
##   1993-Clinton      0       8
##   1997-Clinton      1       8
##   2001-Bush         0       4
##   2005-Bush         1       6
##   2009-Obama        1      10
##   2013-Obama        1       6
## [ reached max_ndoc ... 1 more document ]</code></pre>
<p>构造函数<code><a href="../../reference/dictionary.html">dictionary()</a></code>也适用于两种常见的“外来”字典格式：LIWC 和 Provalis Research’ Wordstat。例如，我们可以加载 LIWC 并将其应用于总统就职演讲语料库：</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb72-1" title="1">dictliwc &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dictionary.html">dictionary</a></span>(<span class="dt">file =</span> <span class="st">"~/Dropbox/QUANTESS/dictionaries/LIWC/LIWC2001_English.dic"</span>,</a>
<a class="sourceLine" id="cb72-2" title="2">                       <span class="dt">format =</span> <span class="st">"LIWC"</span>)</a>
<a class="sourceLine" id="cb72-3" title="3">dfmat_inaug_subset &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_inaugural[<span class="dv">52</span><span class="op">:</span><span class="dv">58</span>], <span class="dt">dictionary =</span> dicliwc)</a>
<a class="sourceLine" id="cb72-4" title="4">dfmat_inaug_subset[, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>]</a></code></pre></div>
</div>
</div>
</div>
<div id="further-examples" class="section level1">
<h1 class="hasAnchor">
<a href="#further-examples" class="anchor"></a>更多范例</h1>
<div id="similarities-between-texts" class="section level2">
<h2 class="hasAnchor">
<a href="#similarities-between-texts" class="anchor"></a>文本之间的相似度</h2>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb73-1" title="1">dfmat_inaug_post1980 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_inaugural, Year <span class="op">&gt;</span><span class="st"> </span><span class="dv">1980</span>),</a>
<a class="sourceLine" id="cb73-2" title="2">               <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>), <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb73-3" title="3">tstat_obama &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(dfmat_inaug_post1980,</a>
<a class="sourceLine" id="cb73-4" title="4">                              dfmat_inaug_post1980[<span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"2009-Obama"</span>, <span class="st">"2013-Obama"</span>), ],</a>
<a class="sourceLine" id="cb73-5" title="5">                              <span class="dt">margin =</span> <span class="st">"documents"</span>, <span class="dt">method =</span> <span class="st">"cosine"</span>)</a>
<a class="sourceLine" id="cb73-6" title="6">tstat_obama</a></code></pre></div>
<pre><code>## textstat_simil object; method = "cosine"
##              2009-Obama 2013-Obama
## 1981-Reagan       0.623      0.638
## 1985-Reagan       0.643      0.663
## 1989-Bush         0.625      0.578
## 1993-Clinton      0.628      0.627
## 1997-Clinton      0.659      0.647
## 2001-Bush         0.606      0.623
## 2005-Bush         0.527      0.587
## 2009-Obama        1.000      0.682
## 2013-Obama        0.682      1.000
## 2017-Trump        0.519      0.516</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb75-1" title="1"><span class="co"># dotchart(as.list(obama_simil)$"2009-Obama", xlab = "Cosine similarity")</span></a></code></pre></div>
<p>我们可以用这些距离来绘制树状图，聚类分析总统：</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb76-1" title="1">data_corpus_sotu &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/connections.html">url</a></span>(<span class="st">"https://quanteda.org/data/data_corpus_sotu.rds"</span>))</a>
<a class="sourceLine" id="cb76-2" title="2"></a>
<a class="sourceLine" id="cb76-3" title="3">dfmat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(<span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_sotu, Date <span class="op">&gt;</span><span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/base/as.Date.html">as.Date</a></span>(<span class="st">"1980-01-01"</span>)),</a>
<a class="sourceLine" id="cb76-4" title="4">               <span class="dt">stem =</span> <span class="ot">TRUE</span>, <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb76-5" title="5">               <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</a>
<a class="sourceLine" id="cb76-6" title="6">dfmat_sotu &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(dfmat_sotu, <span class="dt">min_termfreq =</span> <span class="dv">5</span>, <span class="dt">min_docfreq =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb76-7" title="7"></a>
<a class="sourceLine" id="cb76-8" title="8"><span class="co">#分层聚类 -  在归一化dfm上计算距离</span></a>
<a class="sourceLine" id="cb76-9" title="9">tstat_dist &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_dist</a></span>(<span class="kw"><a href="../../reference/dfm_weight.html">dfm_weight</a></span>(dfmat_sotu, <span class="dt">scheme =</span> <span class="st">"prop"</span>))</a>
<a class="sourceLine" id="cb76-10" title="10"><span class="co"># 聚类分析文本距离</span></a>
<a class="sourceLine" id="cb76-11" title="11">pres_cluster &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/r/stats/hclust.html">hclust</a></span>(<span class="kw"><a href="https://rdrr.io/r/stats/dist.html">as.dist</a></span>(tstat_dist))</a>
<a class="sourceLine" id="cb76-12" title="12"><span class="co"># 按文档名标注</span></a>
<a class="sourceLine" id="cb76-13" title="13">pres_cluster<span class="op">$</span>labels &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/docnames.html">docnames</a></span>(dfmat_sotu)</a>
<a class="sourceLine" id="cb76-14" title="14"><span class="co"># 绘制树状图</span></a>
<a class="sourceLine" id="cb76-15" title="15"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(pres_cluster, <span class="dt">xlab =</span> <span class="st">""</span>, <span class="dt">sub =</span> <span class="st">""</span>,</a>
<a class="sourceLine" id="cb76-16" title="16">     <span class="dt">main =</span> <span class="st">"Euclidean Distance on Normalized Token Frequency"</span>)</a></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-34-1.png" width="960"></p>
<p>我们也可查看特征相似度:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb77-1" title="1">tstat_sim &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_simil.html">textstat_simil</a></span>(dfmat_sotu, dfmat_sotu[, <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"fair"</span>, <span class="st">"health"</span>, <span class="st">"terror"</span>)],</a>
<a class="sourceLine" id="cb77-2" title="2">                      <span class="dt">method =</span> <span class="st">"cosine"</span>, <span class="dt">margin =</span> <span class="st">"features"</span>)</a>
<a class="sourceLine" id="cb77-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="kw"><a href="https://rdrr.io/r/base/list.html">as.list</a></span>(tstat_sim), head, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## $fair
##      time    better       far        us  strategi     lower      long       one 
## 0.8266617 0.8135324 0.8036487 0.8003029 0.8002557 0.7995066 0.7977770 0.7949795 
##   practic  american 
## 0.7944127 0.7892432 
## 
## $health
##    system      issu    privat      need    expand   support    reform      hous 
## 0.9232094 0.9229859 0.9175231 0.9143293 0.9118901 0.9072374 0.9057456 0.9054303 
##    dramat      mani 
## 0.9051588 0.9045851 
## 
## $terror
## terrorist    coalit    cheney      evil  homeland      11th    sudden     regim 
## 0.8539894 0.8179609 0.8175618 0.7949619 0.7878223 0.7603221 0.7556575 0.7533021 
##   septemb   tyranni 
## 0.7502925 0.7383253</code></pre>
</div>
<div id="scaling-document-positions" class="section level2">
<h2 class="hasAnchor">
<a href="#scaling-document-positions" class="anchor"></a>文档位置的缩放分析</h2>
<p>我们在<code><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html">textmodel_wordfish()</a></code>功能上做了大量的开发工作，这里仅演示“wordfish”模型的无监督文档缩放分析：</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb79-1" title="1"><span class="co"># make prettier document names</span></a>
<a class="sourceLine" id="cb79-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="st">"quanteda.textmodels"</span>)</a>
<a class="sourceLine" id="cb79-3" title="3">dfmat_ire &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010)</a>
<a class="sourceLine" id="cb79-4" title="4">tmod_wf &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html">textmodel_wordfish</a></span>(dfmat_ire, <span class="dt">dir =</span> <span class="kw"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="dv">2</span>, <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb79-5" title="5"></a>
<a class="sourceLine" id="cb79-6" title="6"><span class="co"># plot the Wordfish estimates by party</span></a>
<a class="sourceLine" id="cb79-7" title="7"><span class="kw"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textplot_scale1d.html">textplot_scale1d</a></span>(tmod_wf, <span class="dt">groups =</span> <span class="kw"><a href="../../reference/docvars.html">docvars</a></span>(dfmat_ire, <span class="st">"party"</span>))</a></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/unnamed-chunk-36-1.png" width="700"></p>
</div>
<div id="topic-models" class="section level2">
<h2 class="hasAnchor">
<a href="#topic-models" class="anchor"></a>主题模型</h2>
<p><strong>quanteda</strong>可以很轻松训练主题模型：</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb80-1" title="1">dfmat_ire2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(data_corpus_irishbudget2010,</a>
<a class="sourceLine" id="cb80-2" title="2">                  <span class="dt">remove_punct =</span> <span class="ot">TRUE</span>, <span class="dt">remove_numbers =</span> <span class="ot">TRUE</span>,</a>
<a class="sourceLine" id="cb80-3" title="3">                  <span class="dt">remove =</span> <span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"english"</span>))</a>
<a class="sourceLine" id="cb80-4" title="4">dfmat_ire2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(dfmat_ire2, <span class="dt">min_termfreq =</span> <span class="dv">4</span>, <span class="dt">max_docfreq =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb80-5" title="5">dfmat_ire2</a></code></pre></div>
<pre><code>## Document-feature matrix of: 14 documents, 1,271 features (64.5% sparse) and 6 docvars.
##                       features
## docs                   supplementary april said period severe today report
##   Lenihan, Brian (FF)              7     1    1      2      3     9      6
##   Bruton, Richard (FG)             0     1    0      0      0     6      5
##   Burton, Joan (LAB)               0     0    4      2      0    13      1
##   Morgan, Arthur (SF)              1     3    0      3      0     4      0
##   Cowen, Brian (FF)                0     0    0      4      1     3      2
##   Kenny, Enda (FG)                 1     4    4      1      0     2      0
##                       features
## docs                   difficulties months road
##   Lenihan, Brian (FF)             6     11    2
##   Bruton, Richard (FG)            0      0    1
##   Burton, Joan (LAB)              1      3    1
##   Morgan, Arthur (SF)             1      4    2
##   Cowen, Brian (FF)               1      3    2
##   Kenny, Enda (FG)                0      2    5
## [ reached max_ndoc ... 8 more documents, reached max_nfeat ... 1,261 more features ]</code></pre>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb82-1" title="1"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb82-2" title="2"><span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/library.html">require</a></span>(topicmodels)) {</a>
<a class="sourceLine" id="cb82-3" title="3">    my_lda_fit20 &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/topicmodels/man/lda.html">LDA</a></span>(<span class="kw"><a href="../../reference/convert.html">convert</a></span>(dfmat_ire2, <span class="dt">to =</span> <span class="st">"topicmodels"</span>), <span class="dt">k =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb82-4" title="4">    <span class="kw"><a href="https://rdrr.io/pkg/topicmodels/man/get.html">get_terms</a></span>(my_lda_fit20, <span class="dv">5</span>)</a>
<a class="sourceLine" id="cb82-5" title="5">}</a></code></pre></div>
<pre><code>## Loading required package: topicmodels</code></pre>
<pre><code>##      Topic 1    Topic 2        Topic 3   Topic 4 Topic 5   Topic 6     
## [1,] "fianna"   "society"      "benefit" "nama"  "levy"    "million"   
## [2,] "fáil"     "enterprising" "child"   "may"   "million" "investment"
## [3,] "national" "sense"        "day"     "child" "carbon"  "back"      
## [4,] "irish"    "equal"        "today"   "group" "change"  "confidence"
## [5,] "support"  "nation"       "welfare" "bank"  "welfare" "welfare"   
##      Topic 7   Topic 8     Topic 9     Topic 10    Topic 11   Topic 12     
## [1,] "fianna"  "side"      "failed"    "taoiseach" "recovery" "alternative"
## [2,] "package" "kind"      "strategy"  "fine"      "system"   "citizenship"
## [3,] "high"    "education" "needed"    "gael"      "fianna"   "wealth"     
## [4,] "order"   "fianna"    "ministers" "may"       "back"     "adjustment" 
## [5,] "sinn"    "fáil"      "system"    "irish"     "fáil"     "breaks"     
##      Topic 13        Topic 14     Topic 15    Topic 16   Topic 17       
## [1,] "rate"          "support"    "taoiseach" "measures" "million"      
## [2,] "contribution"  "2010"       "employees" "scheme"   "welfare"      
## [3,] "international" "welfare"    "referred"  "spending" "2010"         
## [4,] "measures"      "continue"   "debate"    "review"   "investment"   
## [5,] "child"         "employment" "three"     "level"    "international"
##      Topic 18    Topic 19    Topic 20  
## [1,] "change"    "care"      "welfare" 
## [2,] "less"      "welfare"   "system"  
## [3,] "rate"      "per"       "taxation"
## [4,] "employers" "allowance" "child"   
## [5,] "lower"     "hit"       "worst"</code></pre>
<p>注：以上这个指南翻译于英文版<a href="https://quanteda.io/articles/pkgdown/quickstart.html">quickstart</a>.</p>
</div>
</div>
<div id="processing-chinese-documentation" class="section level1">
<h1 class="hasAnchor">
<a href="#processing-chinese-documentation" class="anchor"></a>Quanteda处理中文文档</h1>
<div id="chinese-stop-words" class="section level2">
<h2 class="hasAnchor">
<a href="#chinese-stop-words" class="anchor"></a>中文停用词：取自百度停用词</h2>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb85-1" title="1"><span class="co"># 读取中文停用词</span></a>
<a class="sourceLine" id="cb85-2" title="2">stopw_zh &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"zh"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>)</a>
<a class="sourceLine" id="cb85-3" title="3"></a>
<a class="sourceLine" id="cb85-4" title="4"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"中华人民共和国成立于1949 年"</span>)</a></code></pre></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
## [1] "中华"   "人民"   "共和国" "成立"   "于"     "1949"   "年"</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb87-1" title="1"><span class="co"># 除去停用词</span></a>
<a class="sourceLine" id="cb87-2" title="2"><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="st">"中华人民共和国成立于1949 年"</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb87-3" title="3"><span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"zh"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>))</a></code></pre></div>
<pre><code>## Tokens consisting of 1 document.
## text1 :
## [1] "中华"   "人民"   "共和国" "成立"   "1949"</code></pre>
</div>
<div id="chinese-government-report" class="section level2">
<h2 class="hasAnchor">
<a href="#chinese-government-report" class="anchor"></a>例子：中国总理的“政府工作报告”</h2>
<p>四十九份中国总理的“政府工作报告”，1954 - 2017</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb89-1" title="1"><span class="co"># 读取文件</span></a>
<a class="sourceLine" id="cb89-2" title="2"><span class="kw"><a href="https://rdrr.io/r/base/load.html">load</a></span>(<span class="st">"examples/data/data_corpus_chinesegovreport.rda"</span>)</a>
<a class="sourceLine" id="cb89-3" title="3"><span class="kw"><a href="https://rdrr.io/r/base/summary.html">summary</a></span>(data_corpus_chinesegovreport, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>## Corpus consisting of 49 documents, showing 10 documents:
## 
##    Text Types Tokens Sentences                           doc_id Year Premier
##   text1  2231  14089       453      1954政府工作报告_周恩来.txt 1954  周恩来
##   text2  3054  35120       981      1955政府工作报告_李富春.txt 1955  李富春
##   text3  1514  13147       495      1956政府工作报告_李先念.txt 1956  李先念
##   text4  2587  21733       704      1957政府工作报告_周恩来.txt 1957  周恩来
##   text5  2185  15161       412      1958政府工作报告_薄一波.txt 1958  薄一波
##   text6  2513  19210       577      1959政府工作报告_周恩来.txt 1959  周恩来
##   text7  1302   6266       164      1960政府工作报告_谭震林.txt 1960  谭震林
##   text8  1892  11675       387 1964政府工作报告_周恩来_摘要.txt 1964  周恩来
##   text9   967   3182       125      1975政府工作报告_周恩来.txt 1975  周恩来
##  text10  2964  19117       659      1978政府工作报告_华国锋.txt 1978  华国锋</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb91-1" title="1"><span class="co"># 分词</span></a>
<a class="sourceLine" id="cb91-2" title="2">toks_china &lt;-<span class="st"> </span>data_corpus_chinesegovreport <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb91-3" title="3"><span class="st">    </span><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb91-4" title="4"><span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"zh"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>))</a>
<a class="sourceLine" id="cb91-5" title="5"></a>
<a class="sourceLine" id="cb91-6" title="6"><span class="co"># 创建 dfm</span></a>
<a class="sourceLine" id="cb91-7" title="7">dfmat_china &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm.html">dfm</a></span>(toks_china)</a>
<a class="sourceLine" id="cb91-8" title="8"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(dfmat_china)</a></code></pre></div>
<pre><code>## 发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 
## 5627 5036 4255 4248 2931 2897 2817 2642 2627 2595</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb93-1" title="1"><span class="co">#发展 经济 社会 建设 改革 人民 主义 工作 企业 国家 </span></a>
<a class="sourceLine" id="cb93-2" title="2"><span class="co">#5627 5036 4255 4248 2931 2897 2817 2642 2627 2595 </span></a>
<a class="sourceLine" id="cb93-3" title="3"></a>
<a class="sourceLine" id="cb93-4" title="4"><span class="co"># 绘制词云图</span></a>
<a class="sourceLine" id="cb93-5" title="5"><span class="kw"><a href="https://rdrr.io/r/base/Random.html">set.seed</a></span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb93-6" title="6">dfmat_china_trim &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/dfm_trim.html">dfm_trim</a></span>(dfmat_china, <span class="dt">min_termfreq =</span> <span class="dv">500</span>)</a>
<a class="sourceLine" id="cb93-7" title="7"><span class="co"># 设置适用于MacOS的字体</span></a>
<a class="sourceLine" id="cb93-8" title="8"><span class="kw"><a href="../../reference/textplot_wordcloud.html">textplot_wordcloud</a></span>(dfmat_china_trim,</a>
<a class="sourceLine" id="cb93-9" title="9">                   <span class="dt">min_count =</span> <span class="dv">6</span>, <span class="dt">random_order =</span> <span class="ot">FALSE</span>,</a>
<a class="sourceLine" id="cb93-10" title="10">                   <span class="dt">rot_per =</span> <span class="fl">.25</span>, <span class="dt">max_words =</span> <span class="dv">100</span>,</a>
<a class="sourceLine" id="cb93-11" title="11">                   <span class="dt">min_size =</span> <span class="fl">.5</span>, <span class="dt">max_size =</span> <span class="fl">2.8</span>,</a>
<a class="sourceLine" id="cb93-12" title="12">                   <span class="dt">font =</span> <span class="cf">if</span> (<span class="kw"><a href="https://rdrr.io/r/base/Sys.info.html">Sys.info</a></span>()[<span class="st">"sysname"</span>] <span class="op">==</span><span class="st"> "Darwin"</span>) <span class="st">"SimHei"</span> <span class="cf">else</span> <span class="ot">NULL</span>,</a>
<a class="sourceLine" id="cb93-13" title="13">                   <span class="dt">color =</span> RColorBrewer<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/RColorBrewer/man/ColorBrewer.html">brewer.pal</a></span>(<span class="dv">8</span>, <span class="st">"Dark2"</span>))</a></code></pre></div>
<pre><code>## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter

## Warning in text.default(x1, y1, word[i], cex = (1 + adjust) * size[i], offset =
## 0, : "rot_per" is not a graphical parameter</code></pre>
<p><img src="quickstart_cn_files/figure-html/fig1-1.png" width="480" style="display: block; margin: auto;"></p>
</div>
<div id="feature-co-occurrence-matrix" class="section level2">
<h2 class="hasAnchor">
<a href="#feature-co-occurrence-matrix" class="anchor"></a>特征共现矩阵</h2>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb95-1" title="1"><span class="co"># fcm -共现窗口为5，2017政府工作报告</span></a>
<a class="sourceLine" id="cb95-2" title="2">corp_china2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/corpus_subset.html">corpus_subset</a></span>(data_corpus_chinesegovreport, Year <span class="op">==</span><span class="st"> "2017"</span>)</a>
<a class="sourceLine" id="cb95-3" title="3">toks_china2 &lt;-<span class="st"> </span>corp_china2 <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-4" title="4"><span class="st">    </span><span class="kw"><a href="../../reference/tokens.html">tokens</a></span>(<span class="dt">remove_punct =</span> <span class="ot">TRUE</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb95-5" title="5"><span class="st">    </span><span class="kw"><a href="../../reference/tokens_select.html">tokens_remove</a></span>(<span class="kw"><a href="https://rdrr.io/pkg/stopwords/man/stopwords.html">stopwords</a></span>(<span class="st">"zh"</span>, <span class="dt">source =</span> <span class="st">"misc"</span>))</a>
<a class="sourceLine" id="cb95-6" title="6"></a>
<a class="sourceLine" id="cb95-7" title="7">fcmat_china1 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/fcm.html">fcm</a></span>(corp_china2, <span class="dt">context =</span> <span class="st">"window"</span>)</a>
<a class="sourceLine" id="cb95-8" title="8"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(fcmat_china1[<span class="st">"改革"</span>, ])</a></code></pre></div>
<pre><code>## 推进 制度   性 体制 完善    "   试   点 农村   要 
##   18   14   11   11   10    8    8    8    7    7</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb97-1" title="1"><span class="co"># fcm 共现窗口为："改革" + “xx”</span></a>
<a class="sourceLine" id="cb97-2" title="2">fcmat_china2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/fcm.html">fcm</a></span>(toks_china2, <span class="dt">context =</span> <span class="st">"window"</span>, <span class="dt">ordered =</span> <span class="ot">TRUE</span>, <span class="dt">tri =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb97-3" title="3"><span class="kw"><a href="../../reference/topfeatures.html">topfeatures</a></span>(fcmat_china2[<span class="st">"改革"</span>, ])</a></code></pre></div>
<pre><code>## 完善 发展   试   点 制度 全面 推进 深化 社会 开放 
##   10    8    8    8    8    7    7    6    5    5</code></pre>
</div>
<div id="wordfish" class="section level2">
<h2 class="hasAnchor">
<a href="#wordfish" class="anchor"></a>文本缩放模型</h2>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb99-1" title="1">wfm &lt;-<span class="st"> </span><span class="kw"><a href="https://rdrr.io/pkg/quanteda.textmodels/man/textmodel_wordfish.html">textmodel_wordfish</a></span>(dfmat_china)</a>
<a class="sourceLine" id="cb99-2" title="2">y &lt;-<span class="st"> </span><span class="dv">1954</span><span class="op">:</span><span class="dv">2017</span></a>
<a class="sourceLine" id="cb99-3" title="3">y &lt;-<span class="st"> </span>y[<span class="op">-</span><span class="kw"><a href="https://rdrr.io/r/base/which.html">which</a></span>(y <span class="op">==</span><span class="st"> </span><span class="dv">1963</span> <span class="op">|</span><span class="st"> </span>y <span class="op">==</span><span class="st"> </span><span class="dv">1961</span> <span class="op">|</span><span class="st"> </span>y <span class="op">==</span><span class="st"> </span><span class="dv">1962</span> <span class="op">|</span><span class="st"> </span>(y <span class="op">&gt;</span><span class="st"> </span><span class="dv">1964</span> <span class="op">&amp;</span><span class="st"> </span>y <span class="op">&lt;</span><span class="st"> </span><span class="dv">1975</span>) <span class="op">|</span><span class="st"> </span>y <span class="op">==</span><span class="st"> </span><span class="dv">1976</span> <span class="op">|</span><span class="st"> </span>y <span class="op">==</span><span class="st"> </span><span class="dv">1977</span>)]</a>
<a class="sourceLine" id="cb99-4" title="4"><span class="kw"><a href="https://rdrr.io/r/graphics/plot.html">plot</a></span>(y, wfm<span class="op">$</span>theta, <span class="dt">xlab =</span> <span class="st">"Year"</span>, <span class="dt">ylab =</span> <span class="st">"Position"</span>)</a></code></pre></div>
<p><img src="quickstart_cn_files/figure-html/fig2-1.png" width="576" style="display: block; margin: auto;"></p>
</div>
<div id="collocation" class="section level2">
<h2 class="hasAnchor">
<a href="#collocation" class="anchor"></a>词组 - 双词词组/三词词组等</h2>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb100-1" title="1"><span class="co"># 所有报告中的双词词组</span></a>
<a class="sourceLine" id="cb100-2" title="2">tstat_col &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_collocations.html">textstat_collocations</a></span>(toks_china, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">min_count =</span> <span class="dv">20</span>, <span class="dt">tolower =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb100-3" title="3"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(tstat_col, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##    collocation count count_nested length   lambda         z
## 1    社会 主义  1787            0      2 5.681516 129.08061
## 2        １ ９   678            0      2 6.550767  95.51231
## 3        亿 元   689            0      2 7.465391  93.26674
## 4        ０ ０   491            0      2 5.737061  85.65216
## 5      现代 化   632            0      2 6.970625  83.79442
## 6    体制 改革   504            0      2 5.213290  77.68085
## 7        ９ ５   350            0      2 5.747953  75.33618
## 8    五年 计划   341            0      2 5.379229  71.91712
## 9    各级 政府   306            0      2 6.130740  66.85440
## 10   增长 百分   300            0      2 5.540923  66.12134</code></pre>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb102-1" title="1"><span class="co"># 2017 报告中的双词词组</span></a>
<a class="sourceLine" id="cb102-2" title="2">tstat_col2 &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/textstat_collocations.html">textstat_collocations</a></span>(toks_china2, <span class="dt">size =</span> <span class="dv">2</span>, <span class="dt">tolower =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb102-3" title="3"><span class="kw"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(tstat_col2, <span class="dv">10</span>)</a></code></pre></div>
<pre><code>##    collocation count count_nested length   lambda        z
## 1    人民 群众    12            0      2 5.406843 12.89491
## 2        亿 元    14            0      2 8.302839 12.62184
## 3        调 控    11            0      2 7.593829 12.41301
## 4    政府 工作     9            0      2 4.710228 11.07990
## 5    深入 实施     8            0      2 5.018592 10.92455
## 6      党 中央     7            0      2 5.747235 10.90905
## 7    体制 改革    11            0      2 5.317394 10.53589
## 8    国内 生产     6            0      2 6.166877 10.48876
## 9      现代 化     8            0      2 5.706045 10.43500
## 10   基础 设施     7            0      2 7.549629 10.42514</code></pre>
<p>注：以上这部分介绍翻译于<a href="https://quanteda.io/articles/pkgdown/examples/chinese.html">英文版</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li>
<a href="#installing-the-package">软件包安装</a><ul class="nav nav-pills nav-stacked">
<li><a href="#additional-recommended-packages">推荐安装</a></li>
      </ul>
</li>
      <li>
<a href="#creating-a-corpus">创建语料库</a><ul class="nav nav-pills nav-stacked">
<li><a href="#currently-available-corpus-sources">目前可用的语料库资源</a></li>
      <li><a href="#how-a-quanteda-corpus-works">quanteda语料库工作方式</a></li>
      <li><a href="#tools-for-handling-corpus-objects">处理语料库对象的功能</a></li>
      <li><a href="#exploring-corpus-texts">浏览语料库文本</a></li>
      </ul>
</li>
      <li>
<a href="#extracting-features-from-a-corpus">从语料库中提取特征</a><ul class="nav nav-pills nav-stacked">
<li><a href="#tokenizing-texts">文本分词</a></li>
      <li><a href="#constructing-a-document-feature-matrix">构建文档特征矩阵</a></li>
      </ul>
</li>
      <li>
<a href="#further-examples">更多范例</a><ul class="nav nav-pills nav-stacked">
<li><a href="#similarities-between-texts">文本之间的相似度</a></li>
      <li><a href="#scaling-document-positions">文档位置的缩放分析</a></li>
      <li><a href="#topic-models">主题模型</a></li>
      </ul>
</li>
      <li>
<a href="#processing-chinese-documentation">Quanteda处理中文文档</a><ul class="nav nav-pills nav-stacked">
<li><a href="#chinese-stop-words">中文停用词：取自百度停用词</a></li>
      <li><a href="#chinese-government-report">例子：中国总理的“政府工作报告”</a></li>
      <li><a href="#feature-co-occurrence-matrix">特征共现矩阵</a></li>
      <li><a href="#wordfish">文本缩放模型</a></li>
      <li><a href="#collocation">词组 - 双词词组/三词词组等</a></li>
      </ul>
</li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Kenneth Benoit, Kohei Watanabe, Haiyan Wang, Paul Nulty, Adam Obeng, Stefan Müller, Akitaka Matsuo, Jiong Wei Lua, Jouni Kuha, William Lowe, European Research Council.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9b4ef7fd791dc6075154d3ebd7b12acf',
    indexName: 'quanteda',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
